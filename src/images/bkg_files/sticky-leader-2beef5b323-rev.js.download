define(["jquery","version!fly/managers/debug","managers/page-vars","components/sticky-element","version!libs/waypoints/jquery.waypoints"],function(e,s,t){s=s.init("stickyLeader"),e.widget("cnet.stickyLeader",e.cnet.stickyElement,{options:{classFadeOut:"fadeOut",duration:0,selectorUnstick:null,topOffset:null,bottomOffset:-60,alwaysSticky:!1},beginWaypoint:null,endWaypoint:null,_create:function(){this._super()},_setupEvents:function(){var s=this,t=this.$placeholder[0];this.beginWaypoint=new Waypoint({element:t,handler:function(e){"down"===e?(s.$placeholder.removeClass(s.options.classHidden),s.$element.addClass(s.options.classFixed)):(s.$placeholder.addClass(s.options.classHidden),s.$element.removeClass(s.options.classFixed))},offset:s.options.topOffset}),s.options.duration>0?setTimeout(function(){s.beginWaypoint.disable(),s.$element.addClass(s.options.classFadeOut),setTimeout(function(){s.$placeholder.addClass(s.options.classHidden),s.$element.removeClass(s.options.classFixed+" "+s.options.classFadeOut)},500)},s.options.duration):this.options.selectorUnstick?this.endWaypoint=new Waypoint({element:e(this.options.selectorUnstick),handler:function(e){"down"===e&&(s.beginWaypoint.disable(),s.endWaypoint.disable(),s.$element.addClass(s.options.classFadeOut),setTimeout(function(){s.$placeholder.addClass(s.options.classHidden),s.$element.removeClass(s.options.classFixed+" "+s.options.classFadeOut)},500))},offset:0}):0==s.options.alwaysSticky&&(this.endWaypoint=new Waypoint({element:t,handler:function(e){"down"===e&&(s.beginWaypoint.disable(),s.endWaypoint&&s.endWaypoint.disable(),s.$element.addClass("fadeOut"),setTimeout(function(){s.$placeholder.addClass(s.options.classHidden),s.$element.removeClass(s.options.classFixed+" fadeOut")},500))},offset:s.options.bottomOffset}))}})});